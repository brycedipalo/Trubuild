---
// Services section with grid of service offerings
const services = [
	{
		title: "Decks",
		image: "/images/deck-sm.jpg",
		description: "Our decks are expertly designed to enhance your outdoor living space. We use high-quality materials and skilled craftsmanship to build sturdy and beautiful decks that are perfect for relaxing, entertaining, or enjoying the view. Whether you need a small patio deck or a large, multi-level deck, we have the experience and expertise to bring your vision to life. Choose from various styles, including traditional wood, composite, and modern metal, to fit your unique taste and needs."
	},
	{
		title: "Fences",
		image: "/images/fence-sm.jpg",
		description: "Quality fencing solutions for privacy, security, and aesthetic appeal. We build durable fences using premium materials that withstand the elements while enhancing your property's curb appeal."
	},
	{
		title: "Kitchens",
		image: "/images/kitchen-sm.jpg",
		description: "Transform your kitchen into a beautiful and functional space. From cabinet installation to countertops and backsplashes, we handle every detail of your kitchen renovation with precision and care."
	},
	{
		title: "Bathrooms",
		image: "/images/bathroom-sm.jpg",
		description: "Complete bathroom renovations and upgrades. We create luxurious, functional bathrooms with modern fixtures, beautiful tilework, and expert craftsmanship that stands the test of time."
	},
	{
		title: "Flooring",
		image: "/images/floor-sm.jpg",
		description: "Professional flooring installation and refinishing services. Whether you prefer hardwood, laminate, tile, or vinyl, we provide expert installation that transforms your space."
	},
	{
		title: "Drywall",
		image: "/images/drywall-sm.jpg",
		description: "Expert drywall installation, repair, and finishing. We deliver smooth, flawless walls ready for painting or finishing, whether it's new construction or repair work."
	}
];
---

<section id="service" class="py-16 bg-white">
	<div class="container mx-auto px-4">
		<!-- Heading -->
		<h2 class="text-3xl font-semibold text-center mb-12 text-gray-900">
			Solutions for Your Home
		</h2>

		<!-- Services Grid -->
		<div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
			{services.map((service, idx) => (
				<div
					class="group relative rounded-lg overflow-hidden shadow-lg cursor-pointer hover:shadow-2xl transition-shadow service-item"
					data-index={idx}
				>
					<!-- Service Image -->
					<img
						src={service.image}
						alt={service.title}
						width="250"
						height="250"
						loading="lazy"
						class="w-full h-64 object-cover"
					/>

					<!-- Overlay - TEMPORARILY REMOVED FOR TESTING -->
					<!-- <div class="absolute inset-0 bg-black bg-opacity-50 group-hover:bg-opacity-60 transition-all flex items-center justify-center z-10">
						<h3 class="text-white text-2xl font-bold">{service.title}</h3>
					</div> -->

					<!-- Title positioned at bottom for now -->
					<div class="absolute bottom-0 left-0 right-0 bg-black/70 p-3">
						<h3 class="text-white text-xl font-bold text-center">{service.title}</h3>
					</div>
				</div>
			))}
		</div>
	</div>

	<!-- Service Modal -->
	<div id="serviceModal" class="fixed inset-0 bg-black bg-opacity-80 hidden z-50 items-center justify-center">
		<div class="bg-white rounded-lg shadow-lg max-w-4xl w-full p-6 relative overflow-y-auto max-h-screen m-4">
			<!-- Close button -->
			<button id="closeModal" class="absolute top-3 right-3 text-gray-600 hover:text-black text-3xl">&times;</button>

			<!-- Modal Content -->
			<div class="flex flex-col md:flex-row gap-6">
				<!-- Image -->
				<div class="md:w-1/2">
					<img id="modalImage" src="" alt="Service" class="rounded-lg shadow-lg w-full" />
				</div>

				<!-- Text Content -->
				<div class="md:w-1/2">
					<h3 id="modalTitle" class="text-3xl font-bold mb-4"></h3>
					<p id="modalText" class="text-gray-700 mb-6 text-lg leading-relaxed"></p>
					<a
						href="#contact"
						class="inline-block px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
					>
						Start Your Dream Project Now!
					</a>
				</div>
			</div>
		</div>
	</div>
</section>

<script define:vars={{ services }}>
	document.addEventListener('DOMContentLoaded', () => {
		const modal = document.getElementById('serviceModal');
		const closeBtn = document.getElementById('closeModal');
		const modalTitle = document.getElementById('modalTitle');
		const modalText = document.getElementById('modalText');
		const modalImage = document.getElementById('modalImage');

		// Open modal on service item click
		document.querySelectorAll('.service-item').forEach((item) => {
			item.addEventListener('click', () => {
				const index = parseInt(item.getAttribute('data-index') || '0');
				const service = services[index];

				if (modalTitle && modalText && modalImage && modal) {
					modalTitle.textContent = service.title;
					modalText.textContent = service.description;
					modalImage.src = service.image;
					modalImage.alt = service.title;
					modal.classList.remove('hidden');
					modal.classList.add('flex');
				}
			});
		});

		// Close modal
		closeBtn?.addEventListener('click', () => {
			modal?.classList.add('hidden');
			modal?.classList.remove('flex');
		});

		// Close on backdrop click
		modal?.addEventListener('click', (e) => {
			if (e.target === modal) {
				modal.classList.add('hidden');
				modal.classList.remove('flex');
			}
		});
	});
</script>
